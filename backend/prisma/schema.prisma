generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  USER
  ADMIN
}

enum EsgType {
  ENVIRONMENT
  SOCIAL
  GOVERNANCE
}

model User {
  id        String       @id @default(uuid())
  email     String       @unique
  password  String
  deptName  String
  role      Role         @default(USER)
  projects  EsgProject[]
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
}

model EsgProject {
  id             String   @id @default(uuid())
  year           Int
  deptName       String
  title          String
  category       EsgType
  task           String

  // Card layout fields
  thumbnail      String?
  oneLineSummary String?

  // Performance data
  quantitative   String?
  qualitative    String   @db.Text
  budget         Float?

  // PDCA Feedback
  shortcoming    String?  @db.Text
  improvement    String?  @db.Text

  // Evidence resources
  images         String[]
  documents      String[]

  isPublished    Boolean  @default(false)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  user           User     @relation(fields: [userId], references: [id])
  userId         String
}
